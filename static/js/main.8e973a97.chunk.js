(this.webpackJsonpmet=this.webpackJsonpmet||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),l=n(7),c=n.n(l),r=(n(14),n(15),n(2)),o=n(3),s=n(1),u=n(4),h=n(5),p=(n(16),n(8)),d=n.n(p),m=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(s.a)(a)),a.handleIncClick=a.handleIncClick.bind(Object(s.a)(a)),a.handleDecClick=a.handleDecClick.bind(Object(s.a)(a)),a}return Object(o.a)(n,[{key:"handleChange",value:function(e){this.props.onTempoChange(e.target.value)}},{key:"handleDecClick",value:function(){this.props.onClick(-1)}},{key:"handleIncClick",value:function(){this.props.onClick(1)}},{key:"render",value:function(){var e=this.props.tempo;return i.a.createElement("div",{className:"slide-container"},i.a.createElement("input",{type:"button",value:"-",className:"tempo-button",onClick:this.handleDecClick}),i.a.createElement("input",{type:"range",min:"30",max:"300",step:"1",value:e,className:"slider",id:"myRange",onChange:this.handleChange}),i.a.createElement("input",{type:"button",value:"+",className:"tempo-button",onClick:this.handleIncClick}))}}]),n}(i.a.Component),v=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(s.a)(a)),a}return Object(o.a)(n,[{key:"handleChange",value:function(e){this.props.onTempoChange(e.target.value,e.target.validity.valid)}},{key:"render",value:function(){var e=this.props.tempo;return i.a.createElement("div",null,"BPM:",i.a.createElement("input",{type:"text",pattern:"[\\d]{1,4}",value:e,className:"tempo-display",onChange:this.handleChange}))}}]),n}(i.a.Component);var C=function(e){var t=e.playing,n=e.currentStep,a=e.steps;return i.a.createElement("div",{className:"step-display"},"Current Beat ".concat(t?n%a.length+1:"-"))},k=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleClick=a.handleClick.bind(Object(s.a)(a)),a}return Object(o.a)(n,[{key:"handleClick",value:function(e){this.props.onMetronomePlayPause(e.target.value)}},{key:"render",value:function(){var e=this.props.playing;return i.a.createElement("button",{className:"play-button",onClick:this.handleClick},e?"Stop":"Start")}}]),n}(i.a.Component);var b=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={currentStep:0,steps:[1,1,1,1],playing:!1,tempo:120,secPerMin:60},a.handleSliderChange=a.handleSliderChange.bind(Object(s.a)(a)),a.handleBPMTextChange=a.handleBPMTextChange.bind(Object(s.a)(a)),a.handlePlayPress=a.handlePlayPress.bind(Object(s.a)(a)),a.handleTempoCrement=a.handleTempoCrement.bind(Object(s.a)(a)),a}return Object(o.a)(n,[{key:"handlePlayPress",value:function(){var e=this;this.state.playing?this.setState({playing:!1},(function(){e.clock.stop(),e.tickEvent.clear(),e.tickEvent=null})):(this.updateTempo(this.state.tempo),this.setState({currentStep:-1,playing:!0},(function(){e.clock.start(),e.tickEvent=e.clock.callbackAtTime(e.handleTick.bind(e),e.audioContext.currentTime).repeat(e.state.secPerMin/e.state.tempo)})))}},{key:"handleTick",value:function(e){var t=e.deadline,n=this.state,a=n.currentStep,i=n.steps,l=a+1;i[l%i.length]&&function(e,t){var n=e.createOscillator();n.frequency.setValueAtTime(330,t),n.frequency.linearRampToValueAtTime(50,t+.15);var a=e.createGain();n.connect(a),a.gain.setValueAtTime(0,t),a.gain.linearRampToValueAtTime(.5,t+.02),a.gain.linearRampToValueAtTime(0,t+.2),a.connect(e.destination),n.start(t),setTimeout((function(){n.disconnect(),a.disconnect()}),3e3)}(this.audioContext,t),this.setState({currentStep:l})}},{key:"componentDidMount",value:function(){var e=window.AudioContext||window.webkitAudioContext;this.audioContext=new e,this.clock=new d.a(this.audioContext)}},{key:"componentWillUnmount",value:function(){this.audioContext.clear()}},{key:"handleSliderChange",value:function(e){this.updateTempo(e),this.state.playing&&(this.clock.timeStretch(this.audioContext.currentTime,[this.tickEvent],this.state.tempo/e),this.setState({currentStep:0}))}},{key:"handleBPMTextChange",value:function(e,t){!this.state.playing&&t&&this.setState({tempo:e})}},{key:"handleTempoCrement",value:function(e){var t=this.state.tempo;t=Number.parseInt(t),t+=1==e?1:-1,this.updateTempo(t)}},{key:"updateTempo",value:function(e){e=(e=e<300?e:300)>30?e:30,this.setState({tempo:e})}},{key:"render",value:function(){var e=this.state,t=e.currentStep,n=e.steps,a=e.playing,l=e.tempo;return i.a.createElement("div",null,i.a.createElement(v,{tempo:l,onTempoChange:this.handleBPMTextChange}),i.a.createElement(m,{tempo:l,onTempoChange:this.handleSliderChange,onClick:this.handleTempoCrement}),i.a.createElement(C,{playing:a,currentStep:t,steps:n}),i.a.createElement(k,{playing:a,onMetronomePlayPause:this.handlePlayPress}))}}]),n}(i.a.Component);var y=function(){return i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,"Simple Metronome"),i.a.createElement(b,null))};c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(y,null)),document.getElementById("root"))},9:function(e,t,n){e.exports=n(19)}},[[9,1,2]]]);
//# sourceMappingURL=main.8e973a97.chunk.js.map